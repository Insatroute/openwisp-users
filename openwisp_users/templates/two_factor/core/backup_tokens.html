{% extends "two_factor/_base_focus.html" %}
{% load i18n %}

{% block content %}
<h1>{% block title %}{% trans "Backup Tokens" %}{% endblock %}</h1>
<p>{% blocktrans trimmed %}Backup tokens are used as a last resort when your main authentication method is unavailable.
  Keep them safe and private.{% endblocktrans %}</p>

{% if device.token_set.count %}
<div
  style="background: #f8fafc; border: 1px solid var(--border-color); border-radius: 12px; padding: 24px; margin: 24px 0;">
  <div
    style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; font-family: 'Courier New', monospace; font-size: 16px; font-weight: 700; color: #1e293b; text-align: center;">
    {% for token in device.token_set.all %}
    <div style="background: white; padding: 10px; border: 1px dashed #cbd5e1; border-radius: 6px;">{{ token.token }}
    </div>
    {% endfor %}
  </div>
</div>
<p style="font-size: 13px; color: var(--text-muted);">
  {% comment %} <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 4px;">
    <polyline points="6 9 6 2 18 2 18 9"></polyline>
    <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
    <rect x="6" y="14" width="12" height="8"></rect>
  </svg> {% endcomment %}
  {% trans "We recommend copying these codes and keeping them somewhere safe." %}
</p>
{% else %}
<div style="padding: 40px 20px; text-align: center; color: var(--text-muted);">
  {% trans "You don't have any backup tokens yet." %}
</div>
{% endif %}

<form method="post" style="margin-top: 32px;">
  {% csrf_token %}
  {{ form.as_p }}
  <button class="tf-btn tf-btn-primary" type="submit" style="margin-bottom: 12px;">
    {% if device.token_set.count %}{% trans "Generate New Tokens" %}{% else %}{% trans "Generate Backup Tokens" %}
    {% endif %}
  </button>
  <a href="{% url 'two_factor:profile'%}" class="tf-btn tf-btn-secondary">{% trans "Back to Security Profile" %}</a>
</form>
{% endblock %}