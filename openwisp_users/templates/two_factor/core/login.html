{% extends "two_factor/_base_focus.html" %}
{% load i18n %}
{% load two_factor_tags %}

{% block extra_media %}
{{ form.media }}
{% endblock %}

{% block content %}
{% comment %} <div class="breadcrumb">
  <a href="/">{% trans "Home" %}</a>
  <span class="breadcrumb-separator">â€º</span>
  <span>{% trans "Log in" %}</span>
</div> {% endcomment %}

<h1>{% block title %}{% trans "Login" %}{% endblock %}</h1>

{% if wizard.steps.current == 'auth' %}
{% comment %} <p>{% trans "Enter your credentials to access your account." %}</p> {% endcomment %}
{% elif wizard.steps.current == 'token' %}
<p>{{ device|as_verbose_action }}</p>
{% elif wizard.steps.current == 'backup' %}
<p>{% blocktrans trimmed %}Enter a backup token to log in.{% endblocktrans %}</p>
{% endif %}

<form action="" method="post">
  {% block main_form_content %}
  {% csrf_token %}
  {% include "two_factor/_wizard_forms.html" %}

  {% if wizard.steps.current == 'auth' %}
  <div style="text-align: right; margin: -16px 0 24px;">
    <a href="{% url 'account_reset_password' %}" class="tf-link" style="display: inline; margin: 0; font-size: 13px;">
      {% trans "Forgot Password?" %}
    </a>
  </div>
  {% endif %}

  {# hidden submit button to enable [enter] key #}
  <input type="submit" value="" hidden />

  {% if other_devices %}
  <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border-color);">
    <p style="font-size: 13px; margin-bottom: 12px;">{% trans "Or use another method:" %}</p>
    {% for other in other_devices %}
    <button name="challenge_device" value="{{ other.persistent_id }}" class="tf-btn tf-btn-secondary"
      style="margin-bottom: 8px;" type="submit">
      {{ other|as_action }}
    </button>
    {% endfor %}
  </div>
  {% endif %}

  {% include "two_factor/_wizard_actions.html" %}
  {% endblock %}
</form>

{% block 'backup_tokens' %}
{% if backup_tokens %}
<div style="margin-top: 16px; text-align: center;">
  <form action="" method="post">
    {% csrf_token %}
    <button name="wizard_goto_step" type="submit" value="backup" class="tf-link"
      style="background: none; border: none; cursor: pointer; font-family: inherit;">
      {% trans "Use a backup token" %}
    </button>
  </form>
</div>
{% endif %}
{% endblock %}
{% endblock %}