{% extends "two_factor/_base_focus.html" %}
{% load i18n %}

{% block extra_media %}
{{ form.media }}
{% endblock %}

{% block content %}
<h1>{% block title %}{% trans "Enable 2FA" %}{% endblock %}</h1>

{% if wizard.steps.current == 'welcome' %}
<p>{% blocktrans trimmed %}You are about to take your account security to the
        next level. Follow the steps in this wizard to enable two-factor
        authentication.{% endblocktrans %}</p>
{% elif wizard.steps.current == 'method' %}
<p>{% blocktrans trimmed %}Please select which authentication method you would
        like to use.{% endblocktrans %}</p>
{% elif wizard.steps.current == 'generator' %}
<p>{% blocktrans trimmed %}To start using a token generator, please use your
        smartphone to scan the QR code below. For example, use Google
        Authenticator.
  {% endblocktrans %}</p>

<div
  style="background: white; padding: 16px; border-radius: 12px; border: 1px solid var(--border-color); display: table; margin: 0 auto 20px;">
  <img src="{{ QR_URL }}" alt="QR Code" style="display: block; width: 200px; height: 200px;" />
</div>

<div
  style="text-align: center; background: #f8fafc; padding: 8px; border-radius: 8px; border: 1px solid var(--border-color);">
  <span
    style="display: block; font-size: 11px; letter-spacing: 0.05em; color: var(--text-muted); font-weight: 700; margin-bottom: 4px;">
    {% trans "TOTP Secret : " %}
  <code
    style="font-size: 12px; font-weight: 700; color: var(--secondary); letter-spacing: 0.1em; word-break: break-all;">{{ secret_key }}</code></span>
</div>

<p style="font-size: 13px;">{% blocktrans %}Then, enter the 6-digit code from the app.{% endblocktrans %}</p>

{% elif wizard.steps.current == 'sms' %}
<p>{% blocktrans trimmed %}Enter your phone number to receive a verification code.{% endblocktrans %}</p>
{% elif wizard.steps.current == 'call' %}
<p>{% blocktrans trimmed %}Enter your phone number to receive a verification call.{% endblocktrans %}</p>
{% elif wizard.steps.current == 'validation' %}
{% if challenge_succeeded %}
<p>{% blocktrans trimmed %}Verification code sent. Please enter it below.{% endblocktrans %}</p>
{% else %}
<div
  style="background: #fef2f2; border: 1px solid #fca5a5; padding: 12px; border-radius: 8px; margin-bottom: 20px; color: #b91c1c; font-size: 13px;">
  {% blocktrans trimmed %}There was an issue with the verification. Please go back and check your details.
  {% endblocktrans %}
</div>
{% endif %}
{% endif %}

<form action="" method="post">{% csrf_token %}
  {% include "two_factor/_wizard_forms.html" %}

  {# hidden submit button to enable [enter] key #}
  <input type="submit" value="" hidden />

  {% include "two_factor/_wizard_actions.html" %}
</form>
{% endblock %}